<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Fix8 Performance - our published performance results including our methodology</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="David L. Dight">

    <!-- Le styles -->
    <link href="css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>
    <link href="css/bootstrap-responsive.css" rel="stylesheet">

    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-57-precomposed.png">
	 <link rel="stylesheet" type="text/css" href="css/fam-icons.css" />
	 <link href="css/prettify.css" type="text/css" rel="stylesheet" />
	 <script type="text/javascript" src="css/prettify.js"></script>
  </head>

  <body onload="prettyPrint()" bgcolor="white">
    <div class="navbar navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </a>
          <a class="brand" href="#"><img src="fix8/fix8_Logo_RGB.png" width="28" height="28" /a></a>
          <div class="nav-collapse">
            <ul class="nav">
              <li><a href="index.html">Home</a></li>
              <li><a href="fix8mt.html" alt="Fix8 Market Technologies Pty Ltd" title="Fix8 Market Technologies Pty Ltd">Fix8MT</a></li>
				  <li><a href="http://www.fix8pro.com" alt="Our fully supported commercial version" title="Our fully supported commercial version">Fix8Pro</a></li>
				  <li><a href="howitworks.html" alt"Description of the basics of the Fix8 model" title="Description of the basics of the Fix8 model">How It Works</a></li>
				  <li><a href="downloads.html" alt="Grab the latest source and binary versions" title="Grab the latest source and binary versions">Downloads</a></li>
              <li><a href="faq.html" alt="Many of the commonist questions are answered here" title="Many of the commonist questions are answered here">FAQ</a></li>
              <li><a href="http://blog.fix8.org" alt="Get the latest news and info about Fix8" title="Get the latest news and info about Fix8">News</a></li>
              <li><a href="https://fix8engine.atlassian.net/wiki" alt="Wiki and documentation" title="Wiki and documentation">Wiki</a></li>
              <li><a href="support.html" alt="Help for users and developers from the Fix8 community" title="Help for users and developers from the Fix8 community">Support</a></li>
              <li><a href="partners.html" alt="Fix8 Partners" title="Fix8 Partners">Partners</a></li>
              <li><a href="https://github.com/fix8/fix8" alt="Our source repository" title="Our source repository">Repository</a></li>
              <li class="active"><a href="#">Performance</a></li>
              <li><a href="fix8/html" alt="The complete API documentation with examples" title="The complete API documentation with examples">API Documentation</a></li>
              <li><a href="aboutus.html" alt="Information about Fix8 Market Tech" title="Information about Fix8 Market Tech">About Us</a></li>
              <li><a href="http://eepurl.com/yNdzX" alt="Register your copy here" title="Register your copy here">Register</a></li>
            </ul>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>

	<div class="container">

		<div class="container">
			<div class="row">
				<div class="span6 offset5">
					<br>
					<img src="fix8/fix8_Logo_RGB.png"/>
					<br>
					<br>
				</div>
			</div>
		</div>

		<!--a href="http://groups.google.com/group/fix8-support"><img src="fix8/googlegroups_logo.gif"/></a-->
		<br>

		<div class="hero-unit">
			<div class="container">
				<div class="row">
					<div class="span11">
						<p><h3>We believe performance is one of the distinguishing features of Fix8. Here we will present our
						current <i>encode</i> and <i>decode</i> performance stats along
						with a description of our test environment and test methodology.</h3></p>
						<br>
					</div>
				</div>
			</div>
		</div>

		<div class="container">
			<div class="row">
				<div class="span12">
					<ul class="nav nav-list">
						<li class="nav-header">Sections</li>
						<li><a href="#1"><h2>1. Our Test Environment</h2></a></li>
						<li><a href="#2"><h2>2. Encode/Decode Performance Test</h2></a></li>
					</ul>
				</div>
			</div>
		</div>
		<br>
		<br>
		<div class="hero-divider"></div>

		<br>
		<br>
		<div class="container">
			<div class="row">
				<div class="span12">
					<a id="1"><h1 class="green">1. Our test environment</h1></a>
					<p>Our test platform has the following specifications:</p>
<pre>
Fedora release 18 (Spherical Cow)
Linux Version 3.9.2-200.fc18.x86_64 GNU/Linux
Compiled #1 SMP Mon May 13 13:59:47 UTC 2013
Thirty-two (16x2 HT) Intel(R) Xeon(R) CPU E5-2690 @ 2.90GHz
20480 KB Cache; 128GB RAM
185691 BogoMIPS Total
</pre>
				<p>And we are building with:</p>
<pre>
gcc version 4.7.2 20121109 (Red Hat 4.7.2-8) (GCC)
</pre>
				<p>We are testing with the following library versions:</p>
<pre>
poco version 1.4.6
gperftools 2.0 (for tcmalloc)
tbb version 4.2 (tbb42_20131003oss)
</pre>
				</div>
			</div>
		</div>
		<br>
		<br>
		<div class="hero-divider"></div>
		<br>
		<br>
		<div class="container">
			<div class="row">
				<div class="span12">
					<a id="2"><h1 class="green">2. Encode/Decode Performance Test</h1></a>
					<p>This section describes the supplied test client/server that <em>you can build and test to compare your performance</em> wth our published
					results.</p>
					<p><i class="icon-exclamation-sign"></i> You will need at least <b>16GB</b> of RAM to run the full test. If you have <b>8GB</b>,
						limit the number of preloaded messages to 200000. For <b>4GB</b> you will need to limit the number of messages to 100000.</p>
				</div>
			</div>
			<br>
			<div class="row">
				<div class="span12">
					<h2>The message set</h2>
					<p>The test client sends a simple <code>NewOrderSingle(D)</code> message for a Fill or Kill buy order with a random quantity bwtween 1 and 10000
					and a random price between 1.0 and 500.0. Each order will have a unique ClOrderID. The following is a typical order.</p>
<pre class="pre-scrollable">
header ("header")
   BeginString (8): FIX.4.2
   BodyLength (9): 146
   MsgType (35): ORDER_SINGLE (D)
   SenderCompID (49): DLD_TEX
   TargetCompID (56): TEX_DLD
   MsgSeqNum (34): 499650
   SendingTime (52): 20121227-11:20:43
NewOrderSingle ("D")
   ClOrdID (11): ord509647-500000
   HandlInst (21): AUTOMATED_EXECUTION_ORDER_PRIVATE_NO_BROKER_INTERVENTION (1)
   Symbol (55): BHP
   Side (54): BUY (1)
   TransactTime (60): 20121227-11:20:14
   OrderQty (38): 57
   OrdType (40): LIMIT (2)
   Price (44): 298.075
   TimeInForce (59): FILL_OR_KILL (4)
trailer ("trailer")
   CheckSum (10):
</pre>
					<p>When the test server receives a <code>NewOrderSingle</code> message it sends either an <code>ExecutionReport(8)</code> with order reject,
						order cancel or order confirmation (randomly selected). The following is a typical order confirmation.</p>
<pre class="pre-scrollable">
header ("header")
   BeginString (8): FIX.4.2
   BodyLength (9): 224
   MsgType (35): EXECUTION_REPORT (8)
   SenderCompID (49): TEX_DLD
   TargetCompID (56): DLD_TEX
   MsgSeqNum (34): 1962926
   SendingTime (52): 20121227-11:22:07
ExecutionReport ("8")
   OrderID (37): ord499647
   ClOrdID (11): ord509647-500000
   ExecID (17): ord499647
   ExecTransType (20): NEW (0)
   ExecType (150): NEW (0)
   OrdStatus (39): NEW (0)
   Symbol (55): BHP
   Side (54): BUY (1)
   OrderQty (38): 57
   OrdType (40): LIMIT (2)
   Price (44): 298.07
   TimeInForce (59): FILL_OR_KILL (4)
   LastCapacity (29): 5
   LeavesQty (151): 57
   CumQty (14): 0
   AvgPx (6): 0
   TransactTime (60): 20121227-11:20:14
   ReportToExch (113): YES (Y)
   HandlInst (21): AUTOMATED_EXECUTION_ORDER_PRIVATE_NO_BROKER_INTERVENTION (1)
trailer ("trailer")
   CheckSum (10):
</pre>
					<p>Followed by one or more fills.</p>
<pre class="pre-scrollable">
header ("header")
   BeginString (8): FIX.4.2
   BodyLength (9): 217
   MsgType (35): EXECUTION_REPORT (8)
   SenderCompID (49): TEX_DLD
   TargetCompID (56): DLD_TEX
   MsgSeqNum (34): 1962929
   SendingTime (52): 20121227-11:22:07
ExecutionReport ("8")
   OrderID (37): ord499647
   ClOrdID (11): ord509647-500000
   ExecID (17): exec1463279
   ExecTransType (20): NEW (0)
   ExecType (150): NEW (0)
   OrdStatus (39): FILLED (2)
   Symbol (55): BHP
   Side (54): BUY (1)
   OrderQty (38): 57
   OrdType (40): LIMIT (2)
   Price (44): 298.07
   TimeInForce (59): FILL_OR_KILL (4)
   LeavesQty (151): 0
   CumQty (14): 57
   AvgPx (6): 298.07
   TransactTime (60): 20121227-11:20:14
   HandlInst (21): AUTOMATED_EXECUTION_ORDER_PRIVATE_NO_BROKER_INTERVENTION (1)
trailer ("trailer")
   CheckSum (10):
</pre>
					<br>
				</div>
			</div>
			<div class="row">
				<div class="span12">
					<h2>The test client/server</h2>
					<p><i class="icon-exclamation-sign"></i> Note that we used <code>tcmalloc</code> and <code>tbb</code> for this test. See the <a href="faq.html">FAQ</a> for details.</p>
					<p>Before you begin, set your compiler optimisation to <code>-O3</code>
<pre>
% export CXXFLAGS=-O3
</pre>
						You then need to pass the codec timing switch <code>--enable-codectiming</code> and the no fill message metadata
						switch<br><code>--enable-fillmetadata=no</code> to configure and cleanly build Fix8.
<pre>
% ./configure --prefix=[your target directory] --enable-codectiming --with-mpmc=tbb --enable-doxygen=no --enable-fillmetadata=no
% make clean; make install
</pre>
						<p><i class="icon-exclamation-sign"></i> If you have installed Fix8 from a release rpm, the supplied hftest will not be configured for this test. Please rebuild it following these instructions.</p>
						For our test, we will simulate an HF client preloading and sending 500000 orders to a server. We will measure the encode and
						decode timings for both the client and the server. We are also going to use the coroutine process mode,
						which will minimise the effects of jitter. The test client and server <code>hftest</code> are built by default when you build Fix8.
						Also by default, the xml configuration files <code>hf_server.xml, hf_client.xml, hf_client_include.xml</code> needed are supplied
						already preconfigured.</p>
						<p><i class="icon-exclamation-sign"></i> Do not use the configure switches shown above when building the other supplied test applications.</p>
						<p>To run the server, execute the following command (assuming the xml config files are in the current directory):</p>
<pre>
% ./hftest -sol server
</pre>
					In another terminal, run the client:
<pre>
% ./hftest -l client -p 500000 -u 50000 -c coro_hf_client.xml
</pre>
					<p>We are telling the client you will be preloading 500000 messages. If you find the client disconnects during the test,
					restart the client in reliable mode:
<pre>
% ./hftest -rl client -p 500000 -u 50000 -c coro_hf_client.xml
0 NewOrderSingle msgs currently preloaded.
loading...
0000001 A 2013-04-19 17:19:50.512934156 Starting session
0000002 A 2013-04-19 17:19:50.513103903 Trying to connect to: 127.0.0.1:11002 (1)
0000003 A 2013-04-19 17:19:50.513403209 Connection successful
0000004 A 2013-04-19 17:19:50.513421223 Session connected
0000005 B 2013-04-19 17:19:50.514467212 Client setting heartbeat interval to 10
0000006 B 2013-04-19 17:19:50.514470236 Heartbeat interval is 10
500000 NewOrderSingle msgs preloaded.
</pre>
					<p>When the client has connected (there are no on screen messages), press <code>?</code> to see the help menu...
<pre>
Key     Command
===     =======
?       Help
N       Send n NewOrderSingle msgs
a       Send all Preloaded NewOrderSingle msgs
b       Batch preload and send n NewOrderSingle msgs
l       Logout
n       Send a NewOrderSingle msg
p       Preload n NewOrderSingle msgs
x       Exit
</pre>
					<p>Now press <code>'a'</code> to send the preloaded orders to the server:
<pre>
500000 NewOrderSingle msgs sent
0 NewOrderSingle msgs remaining.
1967000 ExecutionReport msgs received
</pre>
					<p>When all the execution reports have been received (in the client window), press <code>'l'</code> to logout and exit. Wait a few moments for the
					logging buffer to empty. When the client has disconnected the server will also flush its logging buffer so wait a bit longer for this as well.
					Occasionally you may get a core dump on exit - you can ignore this for now. Your server should have also now exited (we passed the <code>o</code> option).
					</p>
					<p>You can use the supplied printer application <code>hfprint</code> to examine the protocol log output (you will need to enable the file protocol target in the xml configuration).<p>
					<br>
				</div>
			</div>
			<div class="row">
				<div class="span12">
					<h2>Preparing the results</h2>
					<p>
						If all has gone to plan you should have two log files, <code>server</code> and <code>client</code>. Examine the contents of these
						two files to see the results.
<pre>
% cat client server|egrep "Encode|Decode"
0000004 A 2013-11-05 13:51:25.203329321 client Encode: 1.027829627 secs,   500003 msgs, 0.000002056 secs/msg, 486464.86 msgs/sec
0000005 A 2013-11-05 13:51:25.203390025 client Decode: 6.196271045 secs,  1960918 msgs, 0.000003160 secs/msg, 316467.43 msgs/sec
0000006 A 2013-11-05 13:51:24.224960404 server Encode: 4.069362531 secs,  1960918 msgs, 0.000002075 secs/msg, 481873.51 msgs/sec
0000007 A 2013-11-05 13:51:24.225002281 server Decode: 1.109719646 secs,   500003 msgs, 0.000002219 secs/msg, 450566.95 msgs/sec
</pre>
					<br>
				</div>
			</div>
			<div class="row">
				<div class="span12">
					<h2>The results</h2>
					<p>Here are the tabulated results.</p>
					<br>
					<table class="table table-striped table-bordered table-condensed center-table">
						<thead>
							<tr class="success">
								<th>Mode</th>
								<th>Operation</th>
								<th>Msgs processed</th>
								<th>Time secs</th>
								<th>Msgs/sec</th>
								<th>Average &#xb5;s/msg</th>
							</tr>
						</thead>
						<tbody>
							<tr class="success">
								<td>client</td>
								<td>encode</td>
								<td>500003</td>
								<td>1.03</td>
								<td>486465</td>
								<td><b>2.06</b></td>
							</tr>
							<tr class="success">
								<td></td>
								<td>decode</td>
								<td>1960918</td>
								<td>6.20</td>
								<td>316467</td>
								<td><b>3.16</b></td>
							</tr>
							<tr class="success">
								<td>server</td>
								<td>encode</td>
								<td>1960918</td>
								<td>4.07</td>
								<td>481874</td>
								<td><b>2.08</b></td>
							</tr>
							<tr class="success">
								<td></td>
								<td>decode</td>
								<td>500003</td>
								<td>1.11</td>
								<td>450567</td>
								<td><b>2.22</b></td>
							</tr>
						</tbody>
					</table>
					<br>
					<p>Averaged across client and server...</p>
					<table class="span6 table table-striped table-bordered table-condensed center-table">
						<thead>
							<tr class="success">
								<th>Operation</th>
								<th>Average &#xb5;s/msg</th>
							</tr>
						</thead>
						<tbody>
							<tr class="success">
								<td>encode</td>
								<td><b>2.07</b></td>
							</tr>
							<tr class="success">
								<td>decode</td>
								<td><b>2.69</b></td>
							</tr>
						</tbody>
					</table>
					<br>
				</div>
			</div>
			<div class="row">
				<div class="span12">
					<h2>Conclusion</h2>
					<p>Most users will be interested in client encode and decode. On our test hardware, Fix8 encodes a <code>NewOrderSingle(D)</code> in
					<em><b>2.07 &#xb5;s</b></em> and decodes an <code>ExecutionReport(8)</code> in <em><b>2.69 &#xb5;s</b></em> when compiled with gcc. It can also be seen that when averaged across client and server, encode performance is better than decode.</p>
				</div>
			</div>
		</div>
		<br>
		<div class="hero-divider"></div>
		<br>
		<br>

		<div class="pager">
         <li><a href="index.html">Home</a></li>
			<li><a href="fix8mt.html" alt="Professional Fix8 are provided by Fix8 Market Technologies Pty Ltd">Fix8 Market Tech</a></li>
			<li><a href="http://www.fix8pro.com" alt="Our fully supported commercial version">Fix8Pro</a></li>
			<li><a href="howitworks.html">How It Works</a></li>
			<li><a href="downloads.html">Downloads</a></li>
			<li><a href="faq.html">FAQ</a></li>
			<li><a href="http://blog.fix8.org">News</a></li>
			<li><a href="https://fix8engine.atlassian.net/wiki">Wiki</a></li>
			<li><a href="support.html">Support</a></li>
			<li><a href="partners.html">Partners</a></li>
			<li><a href="https://github.com/fix8/fix8">Repository</a></li>
			<li><a href="fix8/html">API Documentation</a></li>
			<li><a href="aboutus.html">About Us</a></li>
		   <li><a href="http://eepurl.com/yNdzX">Register</a></li>
		</div>

		<div class="modal-footer">
		  <p>&copy; <a href="mailto:fix@fix8.org">Fix8 Market Tech. </a>2010-15</p>
		</div>

		<div class="pager">
			<br>
			<br>
			<script type="text/javascript"><!--
				 google_ad_client = "ca-pub-7922922557557911";
				 /* f801 */
				 google_ad_slot = "2068140985";
				 google_ad_width = 728;
				 google_ad_height = 90;
				 //-->
			 </script>
			 <script type="text/javascript"
				 src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
			 </script>
		</div>
		<div class="pager">Sponsorship helps our project.</div>
    </div> <!-- /container -->

    <!-- Le javascript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="js/jquery.js"></script>
    <script src="js/bootstrap-transition.js"></script>
    <script src="js/bootstrap-alert.js"></script>
    <script src="js/bootstrap-modal.js"></script>
    <script src="js/bootstrap-dropdown.js"></script>
    <script src="js/bootstrap-scrollspy.js"></script>
    <script src="js/bootstrap-tab.js"></script>
    <script src="js/bootstrap-tooltip.js"></script>
    <script src="js/bootstrap-popover.js"></script>
    <script src="js/bootstrap-button.js"></script>
    <script src="js/bootstrap-collapse.js"></script>
    <script src="js/bootstrap-typeahead.js"></script>
	 <script type="text/javascript">
			var _gaq = _gaq || [];
			_gaq.push(['_setAccount', 'UA-37054507-1']);
			_gaq.push(['_trackPageview']);
			(function()
			{
				var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
				ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
				var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
			})();
	 </script>

  </body>
</html>
